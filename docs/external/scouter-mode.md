# スカウターモード機能

## 概要

スカウターモードは、選択したノード（コンポーネント）に関連する情報のみを集中的に表示する機能です。ノードをダブルクリックすることで、そのノードに直接関連するノードのみが表示され、複雑な依存関係グラフの中から必要な情報を素早く見つけることができます。

## 背景と目的

### 課題
大規模なReactプロジェクトでは、コンポーネントグラフが複雑になり、特定のコンポーネントの依存関係を把握することが困難になります。全体を表示したままでは以下の問題があります:

- 必要な情報が視覚的に埋もれてしまう
- 関連のないノードやエッジが邪魔になる
- 特定のコンポーネントの影響範囲を素早く確認できない

### 解決策
スカウターモードでは、選択したコンポーネントを中心に、直接的な関係を持つコンポーネントのみを表示することで、集中的な分析を可能にします。

---

## 使い方

### 基本操作

1. **スカウターモードの起動**
   - グラフ上の任意のノードをダブルクリック
   - ダブルクリックしたノードが中心ノードとして設定される

2. **表示される内容**
   - **中心ノード**: ダブルクリックしたコンポーネント（強調表示）
   - **依存先ノード**: 中心ノードが使用している（importしている）コンポーネント
   - **依存元ノード**: 中心ノードを使用している（importしている）コンポーネント
   - **関連エッジ**: 中心ノードに直接接続されているエッジのみ

3. **スカウターモードの解除**
   - ESCキーを押す
   - 画面上部の「全体表示に戻る」ボタンをクリック
   - グラフの背景（空白部分）をダブルクリック

### 応用操作

#### 別のノードへの移動
スカウターモード中に別のノードをダブルクリックすると、そのノードを新しい中心ノードとして表示が切り替わります。これにより、依存関係を辿りながら素早く探索できます。

#### 情報の確認
スカウターモード中でも、通常モードと同様に:
- ノードをシングルクリックで詳細パネルを表示
- ノードにホバーでツールチップを表示
- ズームやパン操作が可能

---

## 表示仕様

### ノードの配置

スカウターモードでは、以下のレイアウトで配置されます:

```
      [依存元ノード群]
            ↓
      [中心ノード]
            ↓
      [依存先ノード群]
```

- **中心ノード**: 画面中央に配置、通常より大きく表示
- **依存元ノード**: 中心ノードの上部に配置
- **依存先ノード**: 中心ノードの下部に配置

### ノードの強調表示

- **中心ノード**: ハイライト表示、サイズを1.5倍に拡大
- **関連ノード**: 通常表示
- **非関連ノード**: 非表示（フィルタリング）

### エッジの表示

- **関連エッジ**: 通常表示
- **非関連エッジ**: 非表示

---

## ユースケース

### 1. 影響範囲の確認
特定のコンポーネントを修正する際、そのコンポーネントに依存している親コンポーネントを素早く確認できます。

**手順**:
1. 修正予定のコンポーネントをダブルクリック
2. 上部に表示される依存元ノード（親コンポーネント）を確認
3. 影響範囲を把握してから修正作業を開始

### 2. 依存関係の追跡
あるコンポーネントが使用している子コンポーネントを確認し、依存チェーンを追跡できます。

**手順**:
1. 起点となるコンポーネントをダブルクリック
2. 下部に表示される依存先ノードを確認
3. 気になる子コンポーネントを再度ダブルクリック
4. さらに下位の依存関係を探索

### 3. リファクタリングの計画
特定のコンポーネントの複雑度を下げるために、依存関係を整理する際に利用できます。

**手順**:
1. 複雑なコンポーネントをダブルクリック
2. 依存しているコンポーネントの数と種類を確認
3. 共通化できる依存や不要な依存を特定
4. リファクタリング計画を立案

### 4. 未使用コンポーネントの確認
依存元が存在しないコンポーネント（未使用コンポーネント）を発見できます。

**手順**:
1. 疑わしいコンポーネントをダブルクリック
2. 上部（依存元）に何も表示されない場合は未使用の可能性
3. 削除または用途の見直しを検討

---

## 制限事項

### 現バージョンの制限

1. **直接関係のみ表示**
   - 2階層以上離れたノードは表示されません
   - 間接的な依存関係を確認するには、中心ノードを切り替える必要があります

2. **循環依存の表示**
   - 循環依存がある場合も、直接の関係のみ表示されます
   - 循環の全体像を把握するには通常モードに戻る必要があります

3. **パフォーマンス**
   - 依存関係が非常に多いノード（50個以上）では描画に時間がかかる場合があります

---

## 今後の拡張予定

以下の機能を将来的に追加予定です:

- **階層の深さ指定**: 1階層だけでなく、2階層、3階層まで表示するオプション
- **フィルタリングとの組み合わせ**: スカウターモード中でもフィルタリングを適用
- **比較モード**: 複数のノードを同時にスカウターモードで表示し比較
- **スナップショット保存**: スカウターモードの状態を保存し、後で復元
- **パスハイライト**: 2つのノード間の依存パスをハイライト表示

---

## トラブルシューティング

### ダブルクリックしても反応しない

**原因**: ノードではなくエッジやラベルをクリックしている可能性があります

**解決方法**: ノードの中心（円形の部分）を正確にダブルクリックしてください

### 中心ノードしか表示されない

**原因**: 選択したノードが孤立しているか、依存関係が存在しません

**解決方法**:
- 通常モードに戻り、ノードのエッジが存在するか確認
- 詳細パネルで依存関係情報を確認

### スカウターモードから抜けられない

**解決方法**:
- ESCキーを押す
- 画面上部の「全体表示に戻る」ボタンをクリック
- ブラウザをリフレッシュ（最終手段）

---

**最終更新日**: 2025年10月19日
**バージョン**: 未実装（計画段階）
