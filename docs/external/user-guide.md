# ReUntangle ユーザーガイド

## はじめに

### ReUntangleとは
ReUntangleは、Reactプロジェクトのコンポーネント構造を可視化し、複雑に絡み合った依存関係を「解きほぐす」ためのWebアプリケーションです。

### 対象ユーザー
- Reactプロジェクトの構造を把握したい開発者
- リファクタリングの計画を立てたいチームリーダー
- コードレビュー時に全体像を確認したいレビュアー
- 既存プロジェクトの引き継ぎを行う新メンバー

---

## クイックスタート

ReUntangleを使った基本的な流れ:

1. **ブラウザでReUntangleを開く**
2. **Reactプロジェクトのフォルダを選択**
3. **自動解析が開始される**
4. **インタラクティブなグラフが表示される**
5. **コンポーネントをクリックして詳細を確認**

所要時間: 約1〜2分（プロジェクトの規模による）

---

## 詳細な使い方

### 1. フォルダの選択

#### 方法1: フォルダ選択ボタン
1. 「フォルダを選択」ボタンをクリック
2. ファイルシステムダイアログが表示される
3. Reactプロジェクトのルートフォルダを選択
4. 「選択」をクリック

#### 方法2: ドラッグ&ドロップ（将来対応予定）
1. エクスプローラー/Finderでフォルダを開く
2. プロジェクトフォルダをブラウザ画面にドラッグ
3. 指定エリアにドロップ

#### 注意事項
- `node_modules`や`.git`などは自動的にスキップされます
- 読み取り権限が必要です
- ファイルデータはブラウザ内でのみ処理され、外部に送信されません

---

### 2. グラフの見方

#### ノード（丸）
- **各ノード = 1つのReactコンポーネント**
- **サイズ**: コンポーネントの複雑度（大きいほど複雑）
- **色**:
  - 青: 通常のコンポーネント
  - 赤: 警告あり（循環依存など）
  - グレー: 未使用コンポーネント

#### エッジ（線）
- **各エッジ = コンポーネント間の依存関係**
- **矢印の向き**: A → B は「AがBを使用している」
- **太さ**: 依存の強さ（太いほど強い結合）

#### レイアウト
- **ツリーレイアウト**: 階層構造が明確
- **力学的レイアウト**: 関係性が自然に配置される

---

### 3. グラフの操作

#### ズーム
- **マウスホイール**: 上下スクロールでズームイン/アウト
- **タッチパッド**: ピンチ操作でズーム

#### パン（移動）
- **ドラッグ**: 背景をドラッグしてグラフ全体を移動
- **スペース + ドラッグ**: 別の方法（将来対応予定）

#### ノードの選択
- **クリック**: ノードをクリックで選択、詳細パネルが表示される
- **ホバー**: マウスを重ねるとツールチップ表示
- **ダブルクリック**: そのコンポーネントを中心に表示（将来対応予定）

#### ノードの配置調整
- **ドラッグ**: ノードをドラッグして位置を調整
- 調整した配置は一時的に保存される

---

### 4. 詳細情報の確認

ノードをクリックすると、画面右側に詳細パネルが表示されます:

#### 基本情報
- **コンポーネント名**
- **ファイルパス**: クリックでファイルを開く（可能な場合）
- **行数**: コンポーネントのコード行数

#### 依存関係
- **依存しているコンポーネント**: このコンポーネントが使用している他のコンポーネント一覧
- **使用されている場所**: このコンポーネントを使用している親コンポーネント一覧

#### メトリクス
- **複雑度スコア**: コンポーネントの複雑さを数値化（0〜100）
- **依存の深さ**: ルートからの階層の深さ
- **使用されているHooks**: useState, useEffect などの一覧

---

### 5. フィルタリングと検索

#### 検索機能
- 画面上部の検索ボックスにコンポーネント名を入力
- 該当するコンポーネントがハイライト表示される
- 複数マッチする場合は一覧表示

#### フィルタリング
- **階層レベル**: 特定の深さのコンポーネントのみ表示
- **複雑度**: 一定以上の複雑度を持つコンポーネントのみ表示
- **警告あり**: 問題のあるコンポーネントのみ表示

---

## 分析結果の理解

### 複雑度スコア

複雑度スコアは以下の要素から算出されます:

- コード行数
- 依存コンポーネント数
- 被依存コンポーネント数
- 使用しているHooksの数
- propsの数
- 外部ライブラリ依存数

**スコアの目安**:
- **0〜30**: シンプルなコンポーネント（良好）
- **31〜60**: やや複雑（許容範囲）
- **61〜80**: 複雑（リファクタリング検討）
- **81〜100**: 非常に複雑（早急な対応推奨）

---

### 警告の種類と対処方法

#### 🔴 循環依存
**問題**: A → B → C → A のように、コンポーネントが循環的に依存している

**影響**:
- バンドルサイズの増加
- デバッグの困難
- 予期しない再レンダリング

**対処方法**:
- 共通のロジックを別モジュールに抽出
- 状態管理を見直す
- コンポーネントの責任を分離

#### 🟡 未使用コンポーネント
**問題**: 他のどのコンポーネントからも使用されていない

**影響**:
- デッドコード
- メンテナンスコストの増加

**対処方法**:
- 本当に不要なら削除
- 今後使用予定なら記録を残す
- ライブラリとして切り出す

#### 🟠 深い依存チェーン
**問題**: 依存の深さが5階層以上

**影響**:
- コードの理解が困難
- 変更の影響範囲が広い
- テストが難しい

**対処方法**:
- 中間層を削減
- コンポーネント構造を平坦化
- 共通コンポーネントを活用

#### 🟣 高い結合度
**問題**: 特定のコンポーネントに多数の依存が集中

**影響**:
- 変更時のリスク増加
- 再利用性の低下

**対処方法**:
- 責任を分割
- Composite パターンの適用
- Context APIの活用

---

## トラブルシューティング

### フォルダが選択できない

**原因**: ブラウザがFile System Access APIに対応していない

**解決方法**:
- Chrome, Edge, Opera の最新版を使用
- Firefox, Safari では制限あり（将来対応予定）

---

### 解析が遅い

**原因**: プロジェクトが大規模、またはnode_modulesが含まれている

**解決方法**:
- 不要なディレクトリが含まれていないか確認
- ブラウザのキャッシュをクリア
- 小さいサブディレクトリから試す

---

### 一部のコンポーネントが表示されない

**原因**: サポートされていない構文や命名規則

**解決方法**:
- ファイル拡張子が `.jsx`, `.tsx`, `.js`, `.ts` であることを確認
- コンポーネントが正しくexportされているか確認
- 動的importは検出されない場合があります

---

### グラフが見づらい

**原因**: コンポーネント数が多すぎる

**解決方法**:
- フィルタリング機能を活用
- 特定のサブツリーに絞る
- レイアウトを切り替える

---

## よくある質問

### Q: プライベートなコードは安全ですか？
A: はい。すべての処理はブラウザ内で完結し、データは外部に送信されません。

### Q: TypeScriptプロジェクトに対応していますか？
A: はい。`.tsx`と`.ts`ファイルを解析できます。

### Q: Next.jsやRemixなどのフレームワークに対応していますか？
A: はい。Reactベースであれば基本的に対応しています。

### Q: 結果をエクスポートできますか？
A: 現在はブラウザ上での閲覧のみです。画像やJSONエクスポートは将来実装予定です。

### Q: 商用プロジェクトで使えますか？
A: はい。ライセンスに従ってご利用ください。

---

## サポート

問題や質問がある場合:
- GitHubリポジトリのIssueを作成
- ドキュメントのFAQを確認
- コミュニティフォーラムで質問

---

**最終更新日**: 2025年10月17日  
**バージョン**: 1.0