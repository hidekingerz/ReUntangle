# ReUntangle - 機能要件定義書

## プロジェクト概要
ReUntangleは、Reactコンポーネント間の関係を図示し、プロジェクトの複雑さを「解きほぐす」ためのWebアプリケーションです。

## 目的
- Reactプロジェクトのコンポーネント構造を可視化
- コンポーネント間の依存関係を明確化
- 複雑度の高い部分を特定し、リファクタリングを支援

---

## 機能要件

### 1. 入力機能

#### 1.1 ローカルフォルダ指定
- ローカルのReactプロジェクトフォルダを指定
- フォルダ選択ダイアログまたはドラッグ&ドロップで受け付け
- 指定されたフォルダ配下を再帰的にスキャン
- 以下のディレクトリを自動的にスキップ:
  - `node_modules/`
  - `.git/`
  - `dist/`, `build/`
  - `.next/`
  - `coverage/`

#### 1.2 対応環境
- デスクトップブラウザ(Chrome, Firefox, Safari, Edge)
- File System Access APIまたは相当の機能を使用

---

### 2. 解析エンジン

#### 2.1 ファイル検出
- 以下の拡張子を持つファイルを識別:
  - `.jsx`
  - `.tsx`
  - `.js`
  - `.ts`
- Reactコンポーネントファイルを自動判定

#### 2.2 依存関係解析
- **import文の解析**
  - ES6 import文を解析
  - 相対パス・絶対パスの解決
- **コンポーネント間の関係抽出**
  - 親子関係の特定
  - propsの受け渡しを追跡
  - コンポーネントの使用箇所を特定

#### 2.3 メタ情報収集
- コンポーネント名
- ファイルパス
- 依存の深さ
- 使用されているhooks

---

### 3. インタラクティブ可視化

#### 3.1 グラフ表示
- **ノード**: 各Reactコンポーネント
- **エッジ**: コンポーネント間の依存関係
- **視覚的表現**:
  - ノードのサイズで複雑度を表現
  - エッジの太さで依存の強さを表現
  - 色分けでカテゴリや階層を表現

#### 3.2 インタラクション
- **ズーム/パン操作**
  - マウスホイールでズーム
  - ドラッグでパン移動
- **ノード操作**
  - クリックで詳細情報表示
  - ドラッグでノード位置調整
  - ホバーでツールチップ表示
- **フィルタリング**
  - 特定のコンポーネントを検索
  - 階層レベルでフィルタ

#### 3.3 レイアウトアルゴリズム
- **ツリーレイアウト**: 階層構造を明確に表示
- **力学的レイアウト(Force-directed)**: 自然な配置で関係性を表現
- レイアウト切り替え機能

---

### 4. 分析情報表示

#### 4.1 複雑度メトリクス
- コンポーネントの複雑度スコア
- 依存コンポーネント数
- 被依存コンポーネント数

#### 4.2 警告・推奨事項
- **循環依存の検出**: 循環依存がある場合に警告表示
- **未使用コンポーネント**: 他から参照されていないコンポーネントを特定
- **深い依存チェーン**: 依存の深さが一定値を超える場合に通知

#### 4.3 詳細情報パネル
- 選択したコンポーネントの詳細情報:
  - ファイルパス
  - 依存しているコンポーネント一覧
  - このコンポーネントを使用しているコンポーネント一覧
  - propsの定義(可能であれば)

---

## 非機能要件

### パフォーマンス
- 小規模プロジェクト(50コンポーネント以下)を5秒以内に解析
- 中規模プロジェクト(51〜200コンポーネント)を10秒以内に解析
- 大規模プロジェクト(201〜500コンポーネント)を30秒以内に解析
- 超大規模プロジェクト(501コンポーネント以上)でも許容可能な速度で動作

### ユーザビリティ
- 直感的なUI/UX
- 初回訪問者でも使い方が理解できる

### セキュリティ
- ローカルファイルの適切な取り扱い
- ファイルデータの非送信(すべてクライアント側で処理)
- ユーザーデータの非保存(プライバシー保護)

---

## 技術的制約

### 入力
- ローカルフォルダの指定のみ対応
- ブラウザのFile System Access APIに依存

### 出力
- インタラクティブな図のみ
- 静的画像エクスポートは将来的な拡張として検討

---

## 将来的な拡張機能(スコープ外)

- GitHubリポジトリURL指定対応
- 画像エクスポート(PNG/SVG)
- JSONデータのエクスポート
- クラウドストレージ連携
- TypeScript型定義の詳細解析
- テストカバレッジとの統合
- パフォーマンスメトリクスの表示

---

## 成功基準

1. 任意のローカルReactプロジェクトを正しく解析できる
2. コンポーネント間の依存関係が視覚的に理解できる
3. 複雑度の高い部分が一目で分かる
4. 快適に操作できるインタラクティブ性
5. すべての処理がクライアント側で完結する

---

**作成日**: 2025年10月17日  
**プロジェクト名**: ReUntangle  
**バージョン**: 1.0
